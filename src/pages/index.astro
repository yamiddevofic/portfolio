---
import BaseLayout from '../Layouts/BaseLayout.astro';
---

<BaseLayout title="Yamid Rodriguez">
  <div class="diagram-wrapper">
    <!-- Controles de Zoom -->
    <div class="zoom-controls">
      <button id="zoomIn" class="zoom-btn" title="Acercar">+</button>
      <button id="zoomOut" class="zoom-btn" title="Alejar">−</button>
      <button id="resetZoom" class="zoom-btn reset" title="Restablecer">⌂</button>
      <span class="zoom-level" id="zoomLevel">100%</span>
    </div>
    
    <div id="mermaid-container" class="mermaid-container">
      <div id="mermaid-diagram" class="mermaid-content"></div>
    </div>
  </div>

  <script>
    import mermaid from 'mermaid';

    interface ZoomState {
      currentZoom: number;
      isDragging: boolean;
      startX: number;
      startY: number;
      translateX: number;
      translateY: number;
      diagramElement: SVGElement | null;
      // Touch specific properties
      isPinching: boolean;
      initialDistance: number;
      initialZoom: number;
      touches: Touch[];
    }

    const diagramDefinition: string = `
      %%{init: {
        'theme': 'base',
        'themeVariables': {
          'primaryColor': '#6b46c1',
          'secondaryColor': '#805ad5',
          'tertiaryColor': '#ecc94b',
          'lineColor': '#2d3748',
          'background': '#f7fafc',
          'edgeLabelBackground': '#ffffff',
          'nodeBorderRadius': '8',
          'fontFamily': 'Arial, sans-serif',
          'clusterBkg': '#faf5ff',
          'clusterBorder': '#6b46c1'
        },
        'flowchart': {
          'zoom': true,
          'pan': true
        }
      }}%%

      graph TD;

    %% Entidad Central - Yamid Rodriguez (Privada)
    subgraph sg_YR ["🧠 YAMID RODRIGUEZ - Esencia Privada"]
        direction TB
        YR["<b>YAMID RODRIGUEZ</b><br/>🎯 Persona Integral"]
        
        subgraph YR_Attributes ["🌟 Atributos Nucleares"]
            direction TB
            YR_Mental["<b>🧠 MENTAL</b><br/>• Capacidad analítica<br/>• Capacidad de síntesis<br/>• Lógico • Método<br/>• Visión de contexto<br/>• Observación • Percepción"]
            YR_Creative["<b>🎨 CREATIVO</b><br/>• Creatividad • Estética<br/>• Habilidad simbólica<br/>• Sensibilidad estética<br/>• Pensamiento analógico<br/>• Ideas • Originalidad"]
            YR_Spiritual["<b>🔮 ESPIRITUAL</b><br/>• Espiritualidad • Intuición<br/>• Energía subconsciente<br/>• Holística • Quietud<br/>• Propósito • Sentido"]
            YR_Human["<b>👤 HUMANO</b><br/>• Comunicación • Escucha<br/>• Emoción • Vivencias<br/>• Valores • Principios<br/>• Anécdotas • Encarnación"]
            YR_Reflective["<b>🤔 REFLEXIVO</b><br/>• Argumentos • Preguntas<br/>• Reflexiones • Introspección<br/>• Subjetividad • Curiosidad<br/>• Palabra • Transparencia"]
        end
        
        YR --- YR_Attributes
    end

    %% Marca Personal (Pública)
    subgraph sg_MP ["🌟 MARCA PERSONAL - Interface Pública"]
        direction TB
        MP["<b>MARCA PERSONAL</b><br/>💼 Proyección al Mundo"]
        
        subgraph MP_Roles ["🎭 Roles Desempeñados"]
            direction LR
            MP_Observer["<b>👁️ OBSERVADOR</b><br/>• Observador consciente<br/>• Analítico • Presente"]
            MP_Integrator["<b>🔗 INTEGRADOR</b><br/>• Integrador • Unificador<br/>• Mediador • Sabio"]
            MP_Communicator["<b>📢 COMUNICADOR</b><br/>• Comunicador • Educador<br/>• Divulgador • Compartido"]
            MP_Collaborator["<b>🤝 COLABORADOR</b><br/>• Colaborador • Cooperador<br/>• Comercial • Discernido"]
        end
        
        subgraph MP_Qualities ["✨ Cualidades Proyectadas"]
            direction LR
            MP_Intellectual["<b>🎓 INTELECTUAL</b><br/>• Inteligencia • Pensante<br/>• Razonable • Nerd"]
            MP_Creative_Q["<b>🎨 CREATIVO</b><br/>• Creativo • Talentoso<br/>• Único • Original"]
            MP_Ethical["<b>⚖️ ÉTICO</b><br/>• Valor ético • Bondadoso<br/>• Intuitivo • Propósito"]
        end
        
        MP --- MP_Roles
        MP --- MP_Qualities
    end

    %% Ecosistema de Áreas
    subgraph sg_EcosistemaCompleto ["🌐 ECOSISTEMA DE CONOCIMIENTO"]
        direction TB
        
        subgraph sg_Desarrollo ["💻 DESARROLLO DE SOFTWARE"]
            direction TB
            Des["<b>🚀 DESARROLLO</b><br/>Soluciones Tecnológicas"]
            Des_Contrib["<b>🎯 Contribuciones Clave:</b><br/>• Creatividad en soluciones<br/>• Visión sistémica holística<br/>• Sentido estético en UX<br/>• Intuición tecnológica<br/>• Propósito en productos"]
            Des --- Des_Contrib
        end

        subgraph sg_Tarot ["🔮 TAROT & SIMBOLISMO"]
            direction TB
            Tar["<b>🌙 TAROT</b><br/>Sabiduría Arquetípica"]
            Tar_Contrib["<b>🎴 Contribuciones Clave:</b><br/>• Apertura de opciones<br/>• Exploración de posibilidades<br/>• Conocimiento simbólico<br/>• Guía intuitiva<br/>• Conexión inconsciente"]
            Tar --- Tar_Contrib
        end

        subgraph sg_Filosofia ["🏛️ FILOSOFÍA & REFLEXIÓN"]
            direction TB
            Fil["<b>📚 FILOSOFÍA</b><br/>Pensamiento Crítico"]
            Fil_Contrib["<b>🤔 Contribuciones Clave:</b><br/>• Preguntas fundamentales<br/>• Reflexiones críticas<br/>• Argumentación sólida<br/>• Definición de valores<br/>• Encarnación de ideas"]
            Fil --- Fil_Contrib
        end

        subgraph sg_Psicologia ["🧠 PSICOLOGÍA HUMANA"]
            direction TB
            Psi["<b>💭 PSICOLOGÍA</b><br/>Comprensión Humana"]
            Psi_Contrib["<b>🔍 Contribuciones Clave:</b><br/>• Comprensión profunda<br/>• Análisis comportamental<br/>• Exploración emocional<br/>• Desarrollo personal<br/>• Procesos terapéuticos"]
            Psi --- Psi_Contrib
        end

        subgraph sg_Fotografia ["📸 ARTE FOTOGRÁFICO"]
            direction TB
            Fot["<b>📷 FOTOGRAFÍA</b><br/>Expresión Visual"]
            Fot_Contrib["<b>🎨 Contribuciones Clave:</b><br/>• Captura de momentos<br/>• Perdurabilidad visual<br/>• Inspiración estética<br/>• Transmisión emocional<br/>• Narrativa visual"]
            Fot --- Fot_Contrib
        end
    end

    %% Conexiones Principales
    YR -.->|"<b>🔄 TRANSFORMACIÓN CONSCIENTE</b><br/>Observador → Integrador → Sabio<br/>Analítico → Humano → Creativo<br/>"| MP;
    
    MP ==>|"<b>⚡ SINERGIA ACTIVA</b><br/>Integra • Unifica • Media<br/>Educa • Colabora • Comunica<br/>Comercializa • Divulga"| sg_EcosistemaCompleto;
    
    sg_EcosistemaCompleto ==>|"<b>🔄 RETROALIMENTACIÓN</b><br/>Conocimiento • Estructura • Inspiración<br/>Métodos • Comunidad • Teoría<br/>Enfoque • Entrenamiento • Guía"| MP;

    %% Interrelaciones Detalladas entre Áreas
    
    %% DESARROLLO ↔ TAROT
    Des -.->|"<b>💻→🔮 ESTRUCTURACIÓN</b><br/>• Arquetipos digitales<br/>• Sistemas de lectura<br/>• Interfaces simbólicas"| Tar;
    Tar -.->|"<b>🔮→💻 INTUICIÓN</b><br/>• Lenguaje simbólico<br/>• Experiencias mágicas<br/>• Narrativas interactivas"| Des;

    %% DESARROLLO ↔ FILOSOFÍA
    Des -.->|"<b>💻→🏛️ MODELADO</b><br/>• Sistemas de pensamiento<br/>• Prototipos racionales<br/>• Modelos lógicos"| Fil;
    Fil -.->|"<b>🏛️→💻 FUNDAMENTACIÓN</b><br/>• Crítica de sistemas<br/>• Coherencia ética<br/>• Visión estructural"| Des;

    %% DESARROLLO ↔ PSICOLOGÍA
    Des -.->|"<b>💻→🧠 MODELADO UX</b><br/>• Experiencias interactivas<br/>• Comportamiento digital<br/>• Emociones en interfaces"| Psi;
    Psi -.->|"<b>🧠→💻 DISEÑO HUMANO</b><br/>• Modelos de usuario<br/>• Teorías de emoción<br/>• Centrado en la persona"| Des;

    %% DESARROLLO ↔ FOTOGRAFÍA
    Des -.->|"<b>💻→📸 AUTOMATIZACIÓN</b><br/>• Apps creativas<br/>• Edición automática<br/>• Sistemas interactivos"| Fot;
    Fot -.->|"<b>📸→💻 ESTÉTICA</b><br/>• Riqueza visual<br/>• Valor emocional<br/>• Narrativa en productos"| Des;

    %% TAROT ↔ FILOSOFÍA
    Tar -.->|"<b>🔮→🏛️ SABIDURÍA</b><br/>• Arquetipos como ideas<br/>• Mapas del alma<br/>• Conexión con lo eterno"| Fil;
    Fil -.->|"<b>🏛️→🔮 ESTRUCTURA</b><br/>• Marco metafísico<br/>• Lenguaje simbólico<br/>• Cosmovisiones profundas"| Tar;

    %% TAROT ↔ PSICOLOGÍA
    Tar -.->|"<b>🔮→🧠 INCONSCIENTE</b><br/>• Lectura emocional<br/>• Diálogo interior<br/>• Proceso terapéutico"| Psi;
    Psi -.->|"<b>🧠→🔮 ANÁLISIS</b><br/>• Símbolos del inconsciente<br/>• Puentes terapéuticos<br/>• Teorías de personalidad"| Tar;

    %% TAROT ↔ FOTOGRAFÍA
    Tar -.->|"<b>🔮→📸 ARQUETIPOS</b><br/>• Composición simbólica<br/>• Iconografía mística<br/>• Lectura visual"| Fot;
    Fot -.->|"<b>📸→🔮 NARRATIVA</b><br/>• Estética arquetípica<br/>• Color emocional<br/>• Tiempo ritualizado"| Tar;

    %% FILOSOFÍA ↔ PSICOLOGÍA
    Fil -.->|"<b>🏛️→🧠 ÉTICA</b><br/>• Reflexión mental<br/>• Crítica de paradigmas<br/>• Existencial humanista"| Psi;
    Psi -.->|"<b>🧠→🏛️ EMPIRISMO</b><br/>• Casos reales<br/>• Comprobación vivencial<br/>• Teorías aplicadas"| Fil;

    %% FILOSOFÍA ↔ FOTOGRAFÍA
    Fil -.->|"<b>🏛️→📸 TEORÍA</b><br/>• Crítica estética<br/>• Teoría de la imagen<br/>• Interpretación visual"| Fot;
    Fot -.->|"<b>📸→🏛️ EXPERIENCIA</b><br/>• Inspiración sensible<br/>• Pensamiento visual<br/>• Intimidad reflexiva"| Fil;

    %% PSICOLOGÍA ↔ FOTOGRAFÍA
    Psi -.->|"<b>🧠→📸 EXPRESIÓN</b><br/>• Documentación del yo<br/>• Estados mentales<br/>• Terapia visual"| Fot;
    Fot -.->|"<b>📸→🧠 CAPTURA</b><br/>• Emoción visual<br/>• Representación estética<br/>• Narrativa personal"| Psi;

    %% Estilos Visuales Mejorados
    style sg_YR fill:#667eea,color:#fff,stroke:#4a5568,stroke-width:4px
    style sg_MP fill:#f093fb,color:#fff,stroke:#4a5568,stroke-width:4px
    style sg_EcosistemaCompleto fill:#4facfe,color:#fff,stroke:#2d3748,stroke-width:4px
    
    style YR fill:#e2e8f0,stroke:#4a5568,stroke-width:3px,color:#2d3748
    style MP fill:#fed7d7,stroke:#e53e3e,stroke-width:3px,color:#742a2a
    
    style YR_Attributes fill:#f7fafc,stroke:#718096,stroke-width:2px
    style MP_Roles fill:#fef5e7,stroke:#d69e2e,stroke-width:2px
    style MP_Qualities fill:#e6fffa,stroke:#319795,stroke-width:2px
    
    style sg_Desarrollo fill:#a8edea,stroke:#319795,stroke-width:3px,color:#234e52
    style sg_Tarot fill:#d299c2,stroke:#805ad5,stroke-width:3px,color:#44337a
    style sg_Filosofia fill:#89f7fe,stroke:#3182ce,stroke-width:3px,color:#2a4365
    style sg_Psicologia fill:#fa709a,stroke:#e53e3e,stroke-width:3px,color:#742a2a
    style sg_Fotografia fill:#ffd89b,stroke:#d69e2e,stroke-width:3px,color:#744210
    
    style Des fill:#f0fff4,stroke:#38a169,stroke-width:2px,color:#22543d
    style Tar fill:#faf5ff,stroke:#805ad5,stroke-width:2px,color:#44337a
    style Fil fill:#e6fffa,stroke:#319795,stroke-width:2px,color:#234e52
    style Psi fill:#fff5f5,stroke:#e53e3e,stroke-width:2px,color:#742a2a
    style Fot fill:#fffbeb,stroke:#d69e2e,stroke-width:2px,color:#744210
    `;

    // Estado del zoom y pan
    const zoomState: ZoomState = {
      currentZoom: 1,
      isDragging: false,
      startX: 0,
      startY: 0,
      translateX: 0,
      translateY: 0,
      diagramElement: null,
      // Touch specific properties
      isPinching: false,
      initialDistance: 0,
      initialZoom: 1,
      touches: []
    };

    const updateZoomLevel = (): void => {
      const zoomLevelElement = document.getElementById('zoomLevel');
      if (zoomLevelElement) {
        zoomLevelElement.textContent = Math.round(zoomState.currentZoom * 100) + '%';
      }
    };

    const applyTransform = (): void => {
      if (zoomState.diagramElement) {
        zoomState.diagramElement.style.transform = 
          `translate(${zoomState.translateX}px, ${zoomState.translateY}px) scale(${zoomState.currentZoom})`;
      }
    };

    const zoomIn = (): void => {
      zoomState.currentZoom = Math.min(zoomState.currentZoom * 1.2, 8);
      applyTransform();
      updateZoomLevel();
    };

    const zoomOut = (): void => {
      zoomState.currentZoom = Math.max(zoomState.currentZoom / 1.2, 0.1);
      applyTransform();
      updateZoomLevel();
    };

    const resetZoom = (): void => {
      zoomState.currentZoom = 1;
      zoomState.translateX = 0;
      zoomState.translateY = 0;
      applyTransform();
      updateZoomLevel();
    };

    // Función para calcular la distancia entre dos puntos touch
    const getDistance = (touch1: Touch, touch2: Touch): number => {
      const dx = touch1.clientX - touch2.clientX;
      const dy = touch1.clientY - touch2.clientY;
      return Math.sqrt(dx * dx + dy * dy);
    };

    // Función para obtener el centro entre dos puntos touch
    const getCenter = (touch1: Touch, touch2: Touch): { x: number, y: number } => {
      return {
        x: (touch1.clientX + touch2.clientX) / 2,
        y: (touch1.clientY + touch2.clientY) / 2
      };
    };

    // Eventos de mouse (desktop)
    const handleWheelZoom = (e: WheelEvent): void => {
      e.preventDefault();
      const mermaidContainer = document.getElementById('mermaid-container');
      if (!mermaidContainer) return;

      const rect = mermaidContainer.getBoundingClientRect();
      const mouseX = e.clientX - rect.left;
      const mouseY = e.clientY - rect.top;
      
      const prevZoom = zoomState.currentZoom;
      
      if (e.deltaY < 0) {
        zoomState.currentZoom = Math.min(zoomState.currentZoom * 1.1, 8);
      } else {
        zoomState.currentZoom = Math.max(zoomState.currentZoom / 1.1, 0.1);
      }
      
      // Ajustar la posición para hacer zoom hacia el cursor
      const zoomFactor = zoomState.currentZoom / prevZoom;
      zoomState.translateX = mouseX - (mouseX - zoomState.translateX) * zoomFactor;
      zoomState.translateY = mouseY - (mouseY - zoomState.translateY) * zoomFactor;
      
      applyTransform();
      updateZoomLevel();
    };

    const handleMouseDown = (e: MouseEvent): void => {
      if (e.button === 0) { // Solo botón izquierdo
        zoomState.isDragging = true;
        zoomState.startX = e.clientX - zoomState.translateX;
        zoomState.startY = e.clientY - zoomState.translateY;
        const mermaidContainer = document.getElementById('mermaid-container');
        if (mermaidContainer) {
          mermaidContainer.style.cursor = 'grabbing';
        }
        e.preventDefault();
      }
    };

    const handleMouseMove = (e: MouseEvent): void => {
      if (zoomState.isDragging) {
        zoomState.translateX = e.clientX - zoomState.startX;
        zoomState.translateY = e.clientY - zoomState.startY;
        applyTransform();
      }
    };

    const handleMouseUp = (): void => {
      zoomState.isDragging = false;
      const mermaidContainer = document.getElementById('mermaid-container');
      if (mermaidContainer) {
        mermaidContainer.style.cursor = 'grab';
      }
    };

    // Eventos táctiles (móvil)
    const handleTouchStart = (e: TouchEvent): void => {
      e.preventDefault();
      zoomState.touches = Array.from(e.touches);

      if (e.touches.length === 1) {
        // Un dedo - pan
        zoomState.isDragging = true;
        zoomState.startX = e.touches[0].clientX - zoomState.translateX;
        zoomState.startY = e.touches[0].clientY - zoomState.translateY;
      } else if (e.touches.length === 2) {
        // Dos dedos - pinch zoom
        zoomState.isDragging = false;
        zoomState.isPinching = true;
        zoomState.initialDistance = getDistance(e.touches[0], e.touches[1]);
        zoomState.initialZoom = zoomState.currentZoom;
      }
    };

    const handleTouchMove = (e: TouchEvent): void => {
      e.preventDefault();

      if (e.touches.length === 1 && zoomState.isDragging && !zoomState.isPinching) {
        // Pan con un dedo
        zoomState.translateX = e.touches[0].clientX - zoomState.startX;
        zoomState.translateY = e.touches[0].clientY - zoomState.startY;
        applyTransform();
      } else if (e.touches.length === 2 && zoomState.isPinching) {
        // Pinch zoom con dos dedos
        const currentDistance = getDistance(e.touches[0], e.touches[1]);
        const scale = currentDistance / zoomState.initialDistance;
        
        const newZoom = Math.max(0.1, Math.min(8, zoomState.initialZoom * scale));
        
        // Obtener el centro del pinch
        const mermaidContainer = document.getElementById('mermaid-container');
        if (mermaidContainer) {
          const rect = mermaidContainer.getBoundingClientRect();
          const center = getCenter(e.touches[0], e.touches[1]);
          const centerX = center.x - rect.left;
          const centerY = center.y - rect.top;
          
          // Calcular nueva posición manteniendo el centro del pinch
          const zoomFactor = newZoom / zoomState.currentZoom;
          zoomState.translateX = centerX - (centerX - zoomState.translateX) * zoomFactor;
          zoomState.translateY = centerY - (centerY - zoomState.translateY) * zoomFactor;
        }
        
        zoomState.currentZoom = newZoom;
        applyTransform();
        updateZoomLevel();
      }
    };

    const handleTouchEnd = (e: TouchEvent): void => {
      e.preventDefault();
      
      if (e.touches.length < 2) {
        zoomState.isPinching = false;
      }
      
      if (e.touches.length === 0) {
        zoomState.isDragging = false;
        zoomState.isPinching = false;
      }
      
      zoomState.touches = Array.from(e.touches);
    };

    const handleKeyboardZoom = (e: KeyboardEvent): void => {
      if (e.ctrlKey || e.metaKey) {
        if (e.key === '+' || e.key === '=') {
          e.preventDefault();
          zoomIn();
        } else if (e.key === '-') {
          e.preventDefault();
          zoomOut();
        } else if (e.key === '0') {
          e.preventDefault();
          resetZoom();
        }
      }
    };

    const initializeDiagram = async (): Promise<void> => {
      try {
        mermaid.initialize({
          startOnLoad: true,
          securityLevel: 'loose'
        });

        const { svg } = await mermaid.render('graphDiv', diagramDefinition);
        const container = document.getElementById('mermaid-diagram');
        
        if (!container) {
          console.error('Container not found');
          return;
        }

        container.innerHTML = svg;
        
        const svgElement = container.querySelector('svg') as SVGElement;
        if (svgElement) {
          zoomState.diagramElement = svgElement;
          svgElement.style.transformOrigin = 'center center';
          svgElement.style.transition = 'transform 0.1s ease';
        }

        // Event listeners para controles
        const zoomInBtn = document.getElementById('zoomIn');
        const zoomOutBtn = document.getElementById('zoomOut');
        const resetZoomBtn = document.getElementById('resetZoom');
        const mermaidContainer = document.getElementById('mermaid-container');

        if (zoomInBtn) zoomInBtn.addEventListener('click', zoomIn);
        if (zoomOutBtn) zoomOutBtn.addEventListener('click', zoomOut);
        if (resetZoomBtn) resetZoomBtn.addEventListener('click', resetZoom);

        if (mermaidContainer) {
          // Eventos de mouse (desktop)
          mermaidContainer.addEventListener('wheel', handleWheelZoom, { passive: false });
          mermaidContainer.addEventListener('mousedown', handleMouseDown);
          
          // Eventos táctiles (móvil)
          mermaidContainer.addEventListener('touchstart', handleTouchStart, { passive: false });
          mermaidContainer.addEventListener('touchmove', handleTouchMove, { passive: false });
          mermaidContainer.addEventListener('touchend', handleTouchEnd, { passive: false });
        }

        // Eventos globales
        document.addEventListener('mousemove', handleMouseMove);
        document.addEventListener('mouseup', handleMouseUp);
        document.addEventListener('keydown', handleKeyboardZoom);

        updateZoomLevel();
      } catch (error) {
        console.error('Error initializing diagram:', error);
      }
    };

    document.addEventListener('DOMContentLoaded', initializeDiagram);
  </script>

  <style>
    .diagram-wrapper {
      position: relative;
      width: 100%;
      height: 80vh;
      background: linear-gradient(135deg, rgba(104,16,241,0.05) 0%, rgba(124,77,255,0.05) 100%);
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
      overflow: hidden;
    }

    .zoom-controls {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 10;
      display: flex;
      gap: 8px;
      background: rgba(255, 255, 255, 0.9);
      padding: 8px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      backdrop-filter: blur(10px);
    }

    .zoom-btn {
      width: 36px;
      height: 36px;
      border: none;
      border-radius: 8px;
      background: #6b46c1;
      color: white;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      /* Mejorar interacción táctil */
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    .zoom-btn:hover {
      background: #553c9a;
      transform: scale(1.05);
    }

    .zoom-btn:active {
      transform: scale(0.95);
    }

    .zoom-btn.reset {
      background: #059669;
      font-size: 16px;
    }

    .zoom-btn.reset:hover {
      background: #047857;
    }

    .zoom-level {
      display: flex;
      align-items: center;
      padding: 0 12px;
      font-size: 14px;
      font-weight: 600;
      color: #374151;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      min-width: 50px;
      justify-content: center;
    }

    .mermaid-container {
      width: 100%;
      height: 100%;
      padding: 24px;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      cursor: grab;
      overflow: hidden;
      position: relative;
      /* Configuración táctil */
      touch-action: none;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    .mermaid-content {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .mermaid-content svg {
      max-width: none !important;
      max-height: none !important;
      cursor: inherit;
      /* Prevenir selección en móvil */
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    .mermaid-container:active {
      cursor: grabbing;
    }

    /* Información de controles */
    .diagram-wrapper::after {
      content: "💡 Usa Ctrl + rueda del mouse para zoom, arrastra para mover, o usa los controles";
      position: absolute;
      bottom: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 12px;
      pointer-events: none;
      opacity: 0.8;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .diagram-wrapper {
        height: 85vh;
      }
      
      .zoom-controls {
        top: 10px;
        right: 10px;
        gap: 4px;
        padding: 6px;
      }
      
      .zoom-btn {
        width: 40px;
        height: 40px;
        font-size: 18px;
        /* Mejorar área táctil */
        min-width: 44px;
        min-height: 44px;
      }
      
      .zoom-level {
        padding: 0 8px;
        font-size: 12px;
        min-width: 45px;
      }
      
      .mermaid-container {
        padding: 16px;
      }
      
      /* Mensaje específico para móvil */
      .diagram-wrapper::after {
        content: "📱 Arrastra con 1 dedo para mover, pellizca con 2 dedos para zoom";
        bottom: 10px;
        left: 10px;
        font-size: 11px;
        padding: 6px 10px;
        max-width: calc(100% - 20px);
        text-align: center;
      }
    }

    /* Estilos adicionales para mejor experiencia móvil */
    @media (max-width: 480px) {
      .zoom-controls {
        top: 5px;
        right: 5px;
        padding: 4px;
        gap: 2px;
      }
      
      .zoom-btn {
        width: 36px;
        height: 36px;
        font-size: 16px;
        min-width: 40px;
        min-height: 40px;
      }
      
      .zoom-level {
        font-size: 11px;
        padding: 0 6px;
        min-width: 40px;
      }
      
      .mermaid-container {
        padding: 12px;
      }
    }

    /* Prevenir zoom del navegador en móvil */
    @media (max-width: 768px) {
      .diagram-wrapper {
        -ms-touch-action: none;
        touch-action: none;
      }
    }
  </style>
</BaseLayout>